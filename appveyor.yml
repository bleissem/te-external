image: Visual Studio 2015

platform:
  - x86
  - x64

clone_folder: c:\mazoea\installation\te-external

environment:
  my_var1: value1

matrix:
  fast_finish: true

before_build:
  - cd %APPVEYOR_BUILD_FOLDER%
  - xcopy /S /I _vsprops-base ..\c++template\projects\vsprops-base
  - python create_links.py
  - dir C:\mazoea\installation\te-external\zlib\projects\
  - dir C:\mazoea\installation\te-external\zlib\projects\vsprops-base\
  - cd ..
  - git clone --depth=1 https://github.com/mazoea/te-builder.git te-builder
  - cd te-builder\src
  - python main.py --settings=externals_only.json
  - echo if %platform%==Win32 set vcplatform=Win32
  - echo if %platform%==Win64 set vcplatform=x64

build_script:
  - mkdir build
